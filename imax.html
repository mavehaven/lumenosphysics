<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IMAX 18K Autostereoscopic Display Feasibility Study</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
            TeX: {equationNumbers: {autoNumber: "AMS"}}
        });
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .download-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        .download-button {
            background-color: #2563eb;
            border: none;
            color: white;
            padding: 12px 24px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .download-button:hover {
            background-color: #1d4ed8;
        }
        main {
            max-width: 4xl;
            margin: 0 auto;
            background-color: white;
            padding: 2rem;
            max-width: 210mm; /* A4 width */
            margin-left: auto;
            margin-right: auto;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1 {
            font-size: 1.875rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            color: #111827;
        }
        h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #1f2937;
        }
        h3 {
            font-size: 1.25rem;
            font-weight: 500;
            margin-bottom: 0.75rem;
            color: #374151;
        }
        p {
            color: #4b5563;
            margin-bottom: 1rem;
        }
        ul {
            list-style-type: disc;
            padding-left: 1.5rem;
            margin-bottom: 1rem;
        }
        li {
            margin-bottom: 0.5rem;
        }
        section {
            margin-bottom: 2rem;
        }
        .mjx-chtml {
            margin: 0.5rem 0;
        }
    </style>
</head>
<body>
    <div class="download-container">
        <button class="download-button" onclick="downloadAsPDF()">Download as PDF</button>
    </div>
    
    <div id="contentToDownload">
        <main>
            <h1>IMAX 18K Autostereoscopic Display Feasibility Study</h1>
            
            <section>
                <h2>Abstract</h2>
                <p>
                    This document outlines the physics and mathematical foundation for implementing an autostereoscopic 18K display system tailored to IMAX dimensions. The system will deliver glasses-free 3D rendering at a scale suitable for IMAX theaters, considering pixel density, optical physics, parallax rendering, luminous flux, and adaptive rendering.
                </p>
            </section>

            <section>
                <h2>1. Screen Dimensions and Pixel Density</h2>
                
                <h3>Screen Specifications</h3>
                <ul>
                    <li><strong>Width (W):</strong> 22 m</li>
                    <li><strong>Aspect Ratio:</strong> 1.375</li>
                    <li><strong>Height (H):</strong> $H = \frac{W}{\text{Aspect Ratio}} = \frac{22}{1.375} = 16 \text{ m}$</li>
                    <li><strong>Area (A):</strong> $A = W \cdot H = 22 \cdot 16 = 352 \text{ m}^2$</li>
                </ul>

                <h3>Resolution and Pixel Size</h3>
                <ul>
                    <li><strong>Horizontal Resolution (Rₕ):</strong> 18,000 px</li>
                    <li><strong>Vertical Resolution (Rᵥ):</strong> $R_v = \frac{R_h}{\text{Aspect Ratio}} = \frac{18,000}{1.375} = 13,091 \text{ px}$</li>
                    <li><strong>Total Pixels:</strong> $\text{Total Pixels} = R_h \cdot R_v = 18,000 \cdot 13,091 = 235,638,000 \text{ px}$</li>
                    <li><strong>Pixel Size (p):</strong> $p = \frac{W}{R_h} = \frac{22}{18,000} = 1.22 \times 10^{-3} \text{ m (1.22 mm)}$</li>
                </ul>
            </section>

            <section>
                <h2>2. Parallax Barrier and Multi-View Rendering</h2>
                
                <h3>Parallax Barrier Mechanics</h3>
                <p>Viewing zone separation (ΔL):</p>
                <div>$\Delta L = d \sin(\theta)$</div>
                <p>Where:</p>
                <ul>
                    <li>$d = 0.01 \text{ m}$ (distance from screen to barrier)</li>
                    <li>$\theta = 60°$</li>
                </ul>
                <p>Therefore:</p>
                <div>$\Delta L = 0.01 \cdot \sin(60°) = 0.00866 \text{ m (8.66 mm)}$</div>

                <h3>Multi-View Rendering</h3>
                <ul>
                    <li><strong>Number of views (Nᵥᵢₑwₛ):</strong> 64</li>
                    <li><strong>Resolution per view:</strong> $\text{Resolution per View} = \frac{R_h}{N_{\text{views}}} = \frac{18,000}{64} = 281.25 \text{ px/view}$</li>
                </ul>
            </section>

            <section>
                <h2>3. Optical Physics</h2>
                
                <h3>Diffraction Limit</h3>
                <p>Angular resolution (θ_diff):</p>
                <div>$\theta_{\text{diff}} = \frac{1.22 \lambda}{D}$</div>
                <p>Where:</p>
                <ul>
                    <li>$\lambda = 550 \text{ nm} = 5.5 \times 10^{-7} \text{ m}$ (green light wavelength)</li>
                    <li>$D = 0.5 \text{ m}$ (projection lens diameter)</li>
                </ul>
                <p>Therefore:</p>
                <div>$\theta_{\text{diff}} = \frac{1.22 \cdot 5.5 \times 10^{-7}}{0.5} = 1.342 \times 10^{-6} \text{ radians}$</div>
            </section>

            <section>
                <h2>4. Luminous Flux and Brightness</h2>
                <p>Total luminous flux (Φ_total):</p>
                <div>$\Phi_{\text{total}} = E \cdot A$</div>
                <p>Where:</p>
                <ul>
                    <li>$E = 300 \text{ lux}$ (standard cinema brightness)</li>
                    <li>$A = 352 \text{ m}^2$ (screen area)</li>
                </ul>
                <p>Therefore:</p>
                <div>$\Phi_{\text{total}} = 300 \cdot 352 = 105,600 \text{ lumens}$</div>
            </section>

            <section>
                <h2>5. Adaptive Rendering and Viewer Tracking</h2>
                <p>The rendering resolution per angle is given by:</p>
                <div>$\Delta R_{\text{adapt}} = f(L_{\text{view}}, \theta_{\text{view}})$</div>
                <p>Where Lᵥᵢₑw is the viewer distance and θᵥᵢₑw is the viewing angle. Sensors track audience geometry to ensure seamless multi-view rendering.</p>
            </section>

            <section>
                <h2>6. Depth of Field and Parallax Rendering</h2>
                <p>Parallax disparities are calculated as:</p>
                <div>$d_p = \frac{B \cdot z}{z + \Delta z}$</div>
                <p>Where:</p>
                <ul>
                    <li>$d_p$: Parallax displacement</li>
                    <li>$B = 0.065 \text{ m}$: Interocular distance</li>
                    <li>$z$: Object distance</li>
                    <li>$\Delta z$: Depth difference</li>
                </ul>
            </section>

            <section>
                <h2>Conclusion</h2>
                <p>
                    This document provides a comprehensive mathematical and physical framework for conducting a feasibility study on an IMAX 18K autostereoscopic display system. The equations and parameters presented here enable engineers to evaluate technical requirements and implementation challenges for this cutting-edge display technology.
                </p>
            </section>
        </main>
    </div>

    <script>
        window.jsPDF = window.jspdf.jsPDF;
        
        async function downloadAsPDF() {
            const content = document.getElementById('contentToDownload');
            
            try {
                // Wait for MathJax to finish rendering
                await MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
                
                // Create canvas from HTML content
                const canvas = await html2canvas(content, {
                    scale: 2,
                    logging: false,
                    useCORS: true,
                    allowTaint: true,
                    foreignObjectRendering: true
                });
                
                // Create PDF with larger format for better quality
                const pdf = new jsPDF({
                    orientation: 'portrait',
                    unit: 'mm',
                    format: 'a4'
                });
                
                // Add image to PDF
                const imgData = canvas.toDataURL('image/png');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
                
                // If content is longer than one page, create multiple pages
                const pageHeight = pdf.internal.pageSize.getHeight();
                let heightLeft = pdfHeight;
                let position = 0;
                let page = 1;
                
                // Add margins for better positioning
                const margin = 20; // 20mm margins
                pdf.addImage(imgData, 'PNG', margin, position, pdfWidth - (margin * 2), pdfHeight);
                heightLeft -= pageHeight;
                
                while (heightLeft >= 0) {
                    position = heightLeft - pdfHeight;
                    pdf.addPage();
                    pdf.addImage(imgData, 'PNG', 0, position, pdfWidth, pdfHeight);
                    heightLeft -= pageHeight;
                    page++;
                }
                
                // Download PDF
                pdf.save('IMAX-18K-Feasibility-Study.pdf');
            } catch (error) {
                console.error('Error generating PDF:', error);
                alert('Error generating PDF. Please try again.');
            }
        }
    </script>
</body>
</html>
