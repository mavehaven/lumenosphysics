<!-- Inside the main content div in paste-2.txt -->
<div class="flex-1 overflow-auto">
    <div class="bg-white shadow-sm">
        <div class="flex justify-between items-center px-6 py-3">
            <h1 class="text-2xl font-bold text-gray-800">Physics Topics</h1>
            <div class="flex items-center space-x-4">
                <!-- Added subscription status indicator -->
                <div id="subscriptionBadge" class="hidden px-3 py-1 rounded-full text-sm"></div>
                <button class="p-2 hover:bg-gray-100 rounded-full">
                    <i class="fas fa-bell text-gray-600"></i>
                </button>
                <div id="userSection" class="flex items-center space-x-2">
                    <!-- User profile will be dynamically populated -->
                </div>
            </div>
        </div>
    </div>

    <div class="p-6" id="topicsContainer">
        <!-- Basic Topics - Always visible -->
        <div class="mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4">Basic Mechanics</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Basic content here -->
            </div>
        </div>

        <!-- Premium Topics - Visibility controlled by subscription -->
        <div id="premiumContent" class="premium-content mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4">Advanced Topics</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Premium content here -->
            </div>
        </div>

        <!-- Premium Content Lock/Upgrade Message -->
        <div id="premiumLock" class="hidden">
            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <i class="fas fa-lock text-yellow-400"></i>
                    </div>
                    <div class="ml-3">
                        <p class="text-sm text-yellow-700">
                            Unlock advanced physics topics with a premium subscription
                        </p>
                        <a href="/subscription.html" class="mt-2 inline-block px-4 py-2 bg-blue-800 text-white rounded hover:bg-blue-700">
                            Upgrade Now
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Update the JavaScript section -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    // Your existing Firebase config
    const firebaseConfig = {
        apiKey: "AIzaSyCEaoy_zMOnmQawZ8uNhyAXHsSbSZcsug4",
        // ... rest of your config
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // DOM Elements
    const premiumContent = document.getElementById('premiumContent');
    const premiumLock = document.getElementById('premiumLock');
    const subscriptionBadge = document.getElementById('subscriptionBadge');
    const userSection = document.getElementById('userSection');

    // Check subscription status
    async function checkSubscription(userId) {
        try {
            const subscriptionDoc = await getDoc(doc(db, 'subscriptions', userId));
            return subscriptionDoc.exists() ? subscriptionDoc.data() : null;
        } catch (error) {
            console.error('Error checking subscription:', error);
            return null;
        }
    }

    // Update UI based on subscription status
    function updateUI(user, subscription) {
        if (!user) {
            // Not logged in
            premiumContent.classList.add('hidden');
            premiumLock.classList.remove('hidden');
            subscriptionBadge.classList.add('hidden');
            userSection.innerHTML = `
                <button onclick="window.location.href='/login.html'" class="px-4 py-2 bg-blue-800 text-white rounded hover:bg-blue-700">
                    Login
                </button>
            `;
            return;
        }

        // User is logged in
        userSection.innerHTML = `
            <img src="/api/placeholder/32/32" alt="Profile" class="w-8 h-8 rounded-full">
            <span class="text-gray-700">${user.email}</span>
            ${!subscription ? `
                <a href="/subscription.html" class="ml-2 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
                    Upgrade
                </a>
            ` : ''}
            <button id="logoutBtn" class="ml-2 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
                Logout
            </button>
        `;

        // Update subscription badge
        if (subscription) {
            subscriptionBadge.textContent = 'Premium';
            subscriptionBadge.classList.remove('hidden');
            subscriptionBadge.classList.add('bg-green-100', 'text-green-800');
            premiumContent.classList.remove('hidden');
            premiumLock.classList.add('hidden');
        } else {
            subscriptionBadge.textContent = 'Free Plan';
            subscriptionBadge.classList.remove('hidden');
            subscriptionBadge.classList.add('bg-gray-100', 'text-gray-800');
            premiumContent.classList.add('hidden');
            premiumLock.classList.remove('hidden');
        }

        // Add logout handler
        document.getElementById('logoutBtn')?.addEventListener('click', () => {
            auth.signOut();
        });
    }

    // Auth state observer
    onAuthStateChanged(auth, async (user) => {
        if (user) {
            const subscription = await checkSubscription(user.uid);
            updateUI(user, subscription);
        } else {
            updateUI(null, null);
        }
    });
</script>
